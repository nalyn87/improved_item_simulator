generator client {
  provider = "prisma-client-js"
  output   = "./user"
}

datasource db {
  provider = "mysql"
  url      = env("USER_DATABASE_URL")
}

model Users {
  userId    Int            @id @default(autoincrement()) @map("user_id")
  password  String         @map("password")
  name      String         @map("name")
  signUpId  String         @unique @map("sign_up_id")

  Character Characters[]

  @@map("users")
}

model Characters {
  characterId  Int    @id @default(autoincrement()) @map("character_id")
  UserId       Int    @map("user_id")
  name         String @unique @map("name")
  health       Int    @default(500) @map("health")
  power        Int    @default(100) @map("power")
  money        Int    @default(10000) @map("money")

  Inventory    Inventory?
  Equipment    Equipment?

  User         Users  @relation(fields: [UserId], references: [userId], onDelete: Cascade)

  @@map("characters")
}

model Inventory {
  CharacterId   Int         @unique @map("character_id")

  Item Items[]

  Character     Characters  @relation(fields: [CharacterId], references: [characterId], onDelete: Cascade)

  @@map("inventory")
}

model Items {
  id               Int         @id @default(autoincrement()) @map("id")
  ItemId           Int         @map("item_id")
  count            Int?        @map("count")
  CharacterIdInv   Int?        @map("character_id_inv")
  CharacterIdEqu   Int?        @map("character_id_eqt")

  Inventory        Inventory?   @relation(fields: [CharacterIdInv], references: [CharacterId], onDelete: Cascade)
  Equipment        Equipment?   @relation(fields: [CharacterIdEqu], references: [CharacterId], onDelete: Cascade)
  
  @@map("items")
}

model Equipment {
  CharacterId   Int         @unique @map("character_id")

  Item Items[]

  Character     Characters  @relation(fields: [CharacterId], references: [characterId], onDelete: Cascade)

  @@map("equipment")
}